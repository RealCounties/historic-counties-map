<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Historic Counties Map</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Leaflet CSS -->
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />

<!-- Leaflet Search Plugin -->
<link rel="stylesheet" href="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.css" />

<style>
  html, body {
    height: 100%;
    margin: 0;
  }
  #map {
    width: 100%;
    height: 100%;
  }
</style>
</head>
<body>

<div id="map"></div>

<!-- Leaflet JS -->
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<!-- Leaflet Geocoder -->
<script src="https://unpkg.com/leaflet-control-geocoder/dist/Control.Geocoder.js"></script>

<script>
// Initialize the map
var map = L.map('map', {
  minZoom: 5,
  maxZoom: 14,
  zoomSnap: 0.5,
}).setView([54.5, -3], 6);

// Add OpenStreetMap basemap
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; OpenStreetMap contributors'
}).addTo(map);

// Restrict to British Isles
var bounds = L.latLngBounds(
  [49.5, -8.5], // Southwest corner
  [60.9, 2.0]   // Northeast corner
);
map.setMaxBounds(bounds);

// Load your GeoJSON file from GitHub
fetch('https://raw.githubusercontent.com/RealCounties/historic-counties-map/main/counties_simplified3.geojson')
  .then(r => r.json())
  .then(data => {
    var countiesLayer = L.geoJSON(data, {
      style: {
        color: "#c00000",
        weight: 1,
        fillOpacity: 0.2
      },
      onEachFeature: function (feature, layer) {
        if (feature.properties) {
          layer.bindPopup('<b>' + (feature.properties.NAME || 'Historic County') + '</b>');
        }
      }
    }).addTo(map);

    // Fit map to UK bounds or data
    map.fitBounds(countiesLayer.getBounds());
  });

// Add search / geocoder control
L.Control.geocoder({
  defaultMarkGeocode: true,
  placeholder: 'Search town, village or postcodeâ€¦'
}).addTo(map);
</script>

</body>
</html>
